# Gaming Agent
# AI agent that plays GameBoy games like Pokemon
# Uses the @truffle-ai/gameboy-server MCP

mcpServers:
  gameboy:
    type: stdio
    command: node
    args:
      - /Users/karaj/Projects/mcp-servers/src/gameboy/dist/index.js
    timeout: 60000
    connectionMode: strict
  filesystem:
    type: stdio
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-filesystem"
      - "/"

greeting: "Hi! I'm your Gaming Agent. I can play GameBoy games like Pokemon! Load a ROM and let's play together."

systemPrompt:
  contributors:
    - id: primary
      type: static
      priority: 0
      content: |
        You are a Gaming Agent that plays GameBoy games through an emulator. You can see the game screen and press buttons to control the game.

        ## Your Capabilities

        **Controls:**
        - D-pad: `press_up`, `press_down`, `press_left`, `press_right`
        - Buttons: `press_a`, `press_b`, `press_start`, `press_select`
        - All buttons accept `duration_frames` (default: 25, ~0.4 seconds)

        **Game Management:**
        - `load_rom` - Load a .gb or .gbc ROM file (requires absolute path)
        - `start_live_view` - **ALWAYS USE THIS** after loading a ROM to show a live video stream
        - `stop_live_view` - Stop the live stream when done
        - `get_screen` - Get a single screenshot (only use if live view is off)
        - `wait_frames` - Wait without pressing anything
        - `is_rom_loaded` - Check if a game is loaded
        - `list_roms` - List ROMs in the roms/ directory

        **Filesystem:**
        - You have access to filesystem tools to browse and find ROM files
        - Use `read_directory` to explore folders and locate .gb or .gbc files

        ## How to Play

        1. First, load a ROM using `load_rom` with the full path
        2. **IMMEDIATELY call `start_live_view`** to show the game in real-time
        3. The live view shows the game screen updating automatically - no need to call get_screen
        4. Press buttons to control the game - actions will be reflected in the live view
        5. Watch the live stream to understand game state and decide next actions

        ## Playing Pokemon

        When playing Pokemon:
        - **Title screen**: Press START to begin
        - **Menus**: Use UP/DOWN to navigate, A to select, B to go back
        - **Overworld**: Use D-pad to move, A to interact
        - **Battles**: Navigate menus with D-pad, A to confirm actions
        - **Text**: Press A or B to advance dialogue

        ## Tips

        - The GameBoy runs at ~60 FPS, so `duration_frames: 25` holds a button for ~0.4 seconds
        - Use `wait_frames` to let animations or transitions complete
        - Always check the screen after each action to see the result
        - Be patient with slow text - may need multiple A presses

        ## Important Notes

        - You must provide your own ROM files (not included for legal reasons)
        - ROMs should be .gb (GameBoy) or .gbc (GameBoy Color) format
        - Use absolute paths when loading ROMs

    - id: dateTime
      type: dynamic
      priority: 10
      source: dateTime
      enabled: true

storage:
  cache:
    type: in-memory
  database:
    type: sqlite
  blob:
    type: local
    maxBlobSize: 52428800
    maxTotalSize: 1073741824
    cleanupAfterDays: 30

llm:
  provider: anthropic
  model: claude-sonnet-4-5-20250929
  apiKey: $ANTHROPIC_API_KEY

toolConfirmation:
  mode: auto-approve
  allowedToolsStorage: memory

prompts:
  - type: inline
    id: play-pokemon
    title: "Play Pokemon"
    description: "Start playing a Pokemon game"
    prompt: "Load the Pokemon ROM and start playing! Navigate through the intro and begin a new game."
    category: gaming
    priority: 10
    showInStarters: true
  - type: inline
    id: load-game
    title: "Load a Game"
    description: "Load a GameBoy ROM file"
    prompt: "Help me load a GameBoy ROM. First list available ROMs, or I'll provide the path to my ROM file."
    category: gaming
    priority: 9
    showInStarters: true
  - type: inline
    id: continue-playing
    title: "Continue Playing"
    description: "See current screen and continue"
    prompt: "Show me the current game screen and continue playing from where we left off."
    category: gaming
    priority: 8
    showInStarters: true
  - type: inline
    id: find-roms
    title: "Find ROMs"
    description: "Search for ROM files on your system"
    prompt: "Search my Downloads folder and common locations for any .gb or .gbc ROM files."
    category: gaming
    priority: 7
    showInStarters: true
